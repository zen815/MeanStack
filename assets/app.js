angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope",function(t){t.$on("login",function(n,o){t.currentUser=o})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(t,n){t.login=function(o,e){n.login(o,e).then(function(n){t.$emit("login",n.data)})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc",function(t,n){t.addPost=function(){t.postBody&&n.create({body:t.postBody}).then(function(){t.postBody=null})},t.$on("ws:new_post",function(n,o){t.$apply(function(){t.posts.unshift(o)})}),n.fetch().then(function(n){t.posts=n})}]),angular.module("app").service("PostsSvc",["$http",function(t){this.fetch=function(){return t.get("/api/posts").then(function(t){return t.data})},this.create=function(n){return t.post("/api/posts",n)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc","$location",function(t,n,o){t.register=function(e,r){n.register(e,r).then(function(n){t.$emit("login",n),o.path("/")})}}]),angular.module("app").config(["$routeProvider","$locationProvider",function(t,n){var o="/templates/";t.when("/",{controller:"PostsCtrl",templateUrl:o+"/posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:o+"/register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:o+"/login.html"}),window.history&&window.history.pushState&&n.html5Mode({enabled:!0,requireBase:!1})}]),angular.module("app").service("UserSvc",["$http",function(t){var n=this;n.getUser=function(){return t.get("/api/users")},n.login=function(o,e){return t.post("/api/sessions",{username:o,password:e}).then(function(o){return n.token=o.data,t.defaults.headers.common["x-auth"]=o.data,n.getUser()})},n.register=function(o,e){return t.post("/api/users",{username:o,password:e}).then(function(){return n.login(o,e)})}}]),angular.module("app").service("WebSocketSvc",["$rootScope","$window",function(t,n){function o(){return"https:"===n.location.protocol?"wss://"+window.location.host:"ws://"+window.location.host}var e=null;this.connect=function(){e=new WebSocket(o()),e.onmessage=function(n){console.log(n);var o=JSON.parse(n.data);t.$broadcast("ws:"+o.topic,o.data)}},this.send=function(t,n){var o=JSON.stringify({topic:t,data:n});e.send(o)}}]).run(["WebSocketSvc",function(t){t.connect()}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnN2Yy5qcyIsIndlYnNvY2tldHMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkb24iLCJfIiwidXNlciIsImN1cnJlbnRVc2VyIiwiVXNlclN2YyIsImxvZ2luIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInRoZW4iLCJyZXNwb25zZSIsIiRlbWl0IiwiZGF0YSIsIlBvc3RzU3ZjIiwiYWRkUG9zdCIsInBvc3RCb2R5IiwiY3JlYXRlIiwiYm9keSIsInBvc3QiLCIkYXBwbHkiLCJwb3N0cyIsInVuc2hpZnQiLCJmZXRjaCIsInNlcnZpY2UiLCIkaHR0cCIsInRoaXMiLCJnZXQiLCIkbG9jYXRpb24iLCJyZWdpc3RlciIsInBhdGgiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiYXBwQmFzZSIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsIndpbmRvdyIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJodG1sNU1vZGUiLCJlbmFibGVkIiwicmVxdWlyZUJhc2UiLCJzdmMiLCJnZXRVc2VyIiwidmFsIiwidG9rZW4iLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCIkcm9vdFNjb3BlIiwiJHdpbmRvdyIsIndlYnNvY2tldEhvc3QiLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdCIsImNvbm5lY3Rpb24iLCJjb25uZWN0IiwiV2ViU29ja2V0Iiwib25tZXNzYWdlIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJwYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwiJGJyb2FkY2FzdCIsInRvcGljIiwic2VuZCIsImpzb24iLCJzdHJpbmdpZnkiLCJydW4iLCJXZWJTb2NrZXRT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QUVBSSxFQUFBRyxVQUFBLFNBQUFDLEdBQ0FDLFFBQUFDLElBQUFGLEVBQ0EsSUFBQUcsR0FBQUMsS0FBQUMsTUFBQUwsRUFBQS9DLEtBQ0FxQyxHQUFBZ0IsV0FBQSxNQUFBSCxFQUFBSSxNQUFBSixFQUFBbEQsUUFJQWEsS0FBQTBDLEtBQUEsU0FBQUQsRUFBQXRELEdBQ0EsR0FBQXdELEdBQUFMLEtBQUFNLFdBQUFILE1BQUFBLEVBQUF0RCxLQUFBQSxHQUNBMkMsR0FBQVksS0FBQUMsT0FHQUUsS0FBQSxlQUFBLFNBQUFDLEdBQ0FBLEVBQUFmIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSB6ZW4gb24gMTUuIDcuIDEwLlxuICovXG5hbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuICAgICduZ1JvdXRlJ1xuXSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHplbiBvbiAxNS4gNy4gMTguXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0FwcGxpY2F0aW9uQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICRzY29wZS4kb24oJ2xvZ2luJywgZnVuY3Rpb24oXyx1c2VyKSB7XG4gICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVzZXI7XG4gICAgfSlcbn0pOyIsIi8qKlxuICogQ3JlYXRlZCBieSB6ZW4gb24gMTUuIDcuIDE3LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIFVzZXJTdmMpe1xuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICBVc2VyU3ZjLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICRzY29wZS4kZW1pdCgnbG9naW4nLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHplbiBvbiAxNS4gNy4gMTAuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1Bvc3RzQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgUG9zdHNTdmMpe1xuICAgICRzY29wZS5hZGRQb3N0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKCRzY29wZS5wb3N0Qm9keSl7XG4gICAgICAgICAgICBQb3N0c1N2Yy5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIGJvZHk6ICRzY29wZS5wb3N0Qm9keVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RCb2R5ID0gbnVsbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS4kb24oJ3dzOm5ld19wb3N0JywgZnVuY3Rpb24oXywgcG9zdCl7XG4gICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICRzY29wZS5wb3N0cy51bnNoaWZ0KHBvc3QpO1xuICAgICAgICB9KVxuICAgIH0pO1xuXG4gICAgUG9zdHNTdmMuZmV0Y2goKS50aGVuKGZ1bmN0aW9uKHBvc3RzKXtcbiAgICAgICAgJHNjb3BlLnBvc3RzID0gcG9zdHM7XG4gICAgfSk7XG59KTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgemVuIG9uIDE1LiA3LiAxMC5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnUG9zdHNTdmMnLCBmdW5jdGlvbigkaHR0cCl7XG5cbiAgICB0aGlzLmZldGNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcG9zdHMnKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlID0gZnVuY3Rpb24ocG9zdCkge1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wb3N0cycsIHBvc3QpO1xuICAgIH07XG59KTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgemVuIG9uIDE1LiA3LiAxOS5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignUmVnaXN0ZXJDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBVc2VyU3ZjLCAkbG9jYXRpb24pe1xuICAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKXtcbiAgICAgICBVc2VyU3ZjLnJlZ2lzdGVyKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odXNlcikge1xuICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdsb2dpbicsIHVzZXIpO1xuICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICAgICAgICAgfSk7XG4gICB9XG59KTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgemVuIG9uIDE1LiA3LiAxNC5cbiAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb25maWcoWyckcm91dGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsIGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcil7XG4gICAgdmFyIGFwcEJhc2UgPSAnL3RlbXBsYXRlcy8nXG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAud2hlbignLycsICAgICAgICAgIHsgY29udHJvbGxlcjogJ1Bvc3RzQ3RybCcsICAgIHRlbXBsYXRlVXJsOiBhcHBCYXNlICsgJy9wb3N0cy5odG1sJ30gKVxuICAgIC53aGVuKCcvcmVnaXN0ZXInLCAgeyBjb250cm9sbGVyOiAnUmVnaXN0ZXJDdHJsJywgdGVtcGxhdGVVcmw6IGFwcEJhc2UgKyAnL3JlZ2lzdGVyLmh0bWwnfSlcbiAgICAud2hlbignL2xvZ2luJywgICAgIHsgY29udHJvbGxlcjogJ0xvZ2luQ3RybCcsICAgIHRlbXBsYXRlVXJsOiBhcHBCYXNlICsgJy9sb2dpbi5odG1sJ30pO1xuXG4gICAgLy8gdXNlIHRoZSBIVE1MNSBIaXN0b3J5IEFQSVxuICAgIGlmKHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSkge1xuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xuICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgIHJlcXVpcmVCYXNlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG59XSk7XG5cbiIsIi8qKlxuICogQ3JlYXRlZCBieSB6ZW4gb24gMTUuIDcuIDE3LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdVc2VyU3ZjJywgZnVuY3Rpb24oJGh0dHApe1xuICAgIHZhciBzdmMgPSB0aGlzO1xuICAgIHN2Yy5nZXRVc2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJyk7XG4gICAgfVxuXG4gICAgc3ZjLmxvZ2luID0gZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKXtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMnLCB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHZhbCl7XG4gICAgICAgICAgICBzdmMudG9rZW4gPSB2YWwuZGF0YTtcbiAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyd4LWF1dGgnXSA9IHZhbC5kYXRhO1xuICAgICAgICAgICAgcmV0dXJuIHN2Yy5nZXRVc2VyKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN2Yy5yZWdpc3RlciA9IGZ1bmN0aW9uKHVzZXJuYW1lLCBwYXNzd29yZCl7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLCBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuIHN2Yy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuICAgICAgICB9KVxuICAgIH1cbn0pOyIsIi8qKlxuICogQ3JlYXRlZCBieSB6ZW4gb24gMTUuIDcuIDIyLlxuICovXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdXZWJTb2NrZXRTdmMnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkd2luZG93KXtcbiAgICBmdW5jdGlvbiB3ZWJzb2NrZXRIb3N0KCkge1xuICAgICAgICBpZigkd2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSBcImh0dHBzOlwiKXtcbiAgICAgICAgICAgIHJldHVybiBcIndzczovL1wiICsgd2luZG93LmxvY2F0aW9uLmhvc3Q7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJ3czovL1wiICsgd2luZG93LmxvY2F0aW9uLmhvc3Q7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgY29ubmVjdGlvbiA9IG51bGw7XG4gICAgdGhpcy5jb25uZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB1cmwgPSAnd3M6Ly9sb2NhbGhvc3Q6MzAwMCc7XG4gICAgICAgIGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0KHdlYnNvY2tldEhvc3QoKSk7XG5cbiAgICAgICAgY29ubmVjdGlvbi5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgIHZhciBwYXlsb2FkID0gSlNPTi5wYXJzZShlLmRhdGEpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd3czonICsgcGF5bG9hZC50b3BpYywgcGF5bG9hZC5kYXRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uKHRvcGljLCBkYXRhKSB7XG4gICAgICAgIHZhciBqc29uID0gSlNPTi5zdHJpbmdpZnkoe3RvcGljOiB0b3BpYywgZGF0YTogZGF0YX0pO1xuICAgICAgICBjb25uZWN0aW9uLnNlbmQoanNvbik7XG4gICAgfVxufSlcbi5ydW4oZnVuY3Rpb24oV2ViU29ja2V0U3ZjKXtcbiAgICBXZWJTb2NrZXRTdmMuY29ubmVjdCgpO1xufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9